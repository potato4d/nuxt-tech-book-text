# Nuxt概論

それではいよいよ本書のテーマである Nuxt の概要についてご紹介していきます。

このセクションでは、Nuxt がどういった技術であるか。という簡単なご紹介のほか、前セクションにて考えた要件に対して、どれだけ Nuxt がマッチしているか。どういった時に Nuxt を利用すべきか。

逆に利用すべきでない場合はどういうときか。といったものをご紹介いたします。

## Nuxtとは何か

Nuxt は、 Vue.js をベースとして開発された、フロントエンドのフルスタックなフレームワークとなります。
当初は Vue.js におけるサーバーサイドレンダリングが煩雑であるという課題を解決するために、先行の React 製のフレームワークである「 Next.js 」を模して開発されましたが、今やミニマルな機能だけを提供している Next.js とは裏腹に、 Vue.js 開発で頻繁に利用される機能を全て取り込んだ、非常に強力なフレームワークとして仕上がっています。

サーバーサイドレンダリングは勿論、それ自体をオフにしてただの SPA 用のフレームワークとして利用することも可能ですし、 SPA を SEO に強い HTML として正しく静的サイトとして吐き出してくれる機能まで持っている状態となり、様々な開発シーンで柔軟に使えるフレームワークとして仕上がっています。

サーバーサイドレンダリングを行わず、ただの SPA 基盤として使う場合でも、 Flux パターンの Vue 実装である Vuex ストアのオートローディング機能や、ルーティングの自動生成機能、グローバルなレイアウトの共通化システムに、特定のルーティングに限って認証を付与するなど、アクセスに対してガードを張ることが可能なミドルウェアに、通常の Vue プラグインをより柔軟に扱うためのプラグインシステム、そして公式が提供するプラグインやミドルウェアを簡単に読み込むことができる Nuxt モジュールまで。簡単な SPA 開発では全ての機能を使い切れないほどの機能があります。

勿論、中規模大規模となってくると、特定のルーティングにおいてリクエスト内容を改ざんできるミドルウェアなどはなくてはならない存在となっていきます。そのため、それらを搭載した Nuxt は、大きくなるアプリケーションとともに成長していくのにベストなフレームワークとなっております。

## 今、 SPA 開発に Nuxt が求められるワケ

確かに今まであげた機能は魅力的ですが、 Vue.js 単体でこれまでの開発が行われてきたことを考えると、決して Nuxt に頼らずとも本格的な SPA 開発は十分こなせるはずです。では、その上でなぜ Nuxt が必要なのでしょうか？

その一つの回答として、秩序があります。 Vue.js は、非常に柔軟なフレームワークとなっており、かつ React + Redux や Angular のように、鉄板パターンが提唱され、浸透しきっているわけではない状態であります。 Vue.js は間口が広いこともあり、一般的に自由なコーディングが蔓延しやすい傾向にあり、なかなかにアーキテクチャが安定しないことを経験したことがあるかたは多いでしょう。

Nuxt は、その問題を規約ベースのルール設定と規約に沿った場合の強力なサポートによって縛ることが可能です。ディレクトリ名など、ある程度は規約を曲げることもできますが、基本的には Nuxt が良しとするルーティング構成で、 Nuxt が良しとする Vuex Store 構成やコンポーネント構成にしておけば間違いなく、かつ強力な支援が得られることとなります。

また、コンポーネントやページはまだある程度プロジェクトごとにルールの制定することができますが、 middleware や plugin に関しては、 Vue.js デフォルトでは存在しないため、バラバラに管理されるか、 index.js や App.vue の無闇な肥大化につながることが頻発します。この問題についても、 Nuxt 側でシステムの実装が行われているため、そのルールに沿っていくことによって、秩序のある開発が可能となります。

Vue.js 開発で苦しんでいる人が、なによりも Nuxt に対して希望がもてるポイントは、きっと秩序の一点でしょう。

もう一つの回答は、前セクションで紹介した「流行する技術への追従」を正しく行っていることでしょう。

Nuxt は、その独自コミュニティの中で、 PWA 用のモジュールや、サーバーサイドレンダリングの基盤を提供しています。
確かに Vue.js でも、非常にアトミックな単位での SSR のシステムや、 PWA のテンプレートは提供していますが、 Nuxt ほど手厚いサポートではないでしょう。また、 Vue.js 本体がそこまでサポートすることは逆にライブラリとしての方向性に疑問をもつかたも少なくないでしょう。

Nuxt は、それ単体のコミュニティよって進化を続けながら、 Vue.js の本体のルールから逸脱しない形で進んでいるため、これからも先進的な機能をフル活用しながら、かつベースコミュニティとうまく付き合っていく理想的な形を進んでいくことでしょう。

## Nuxtをオススメするシーン、しないシーン

それでは、その前提を踏まえた上で、どういったシーンにおいて Nuxt をオススメするかをご紹介いたします。

まず、前提として、新規の Vue.js での SPA 開発であれば、間違いなく Nuxt を選ぶことをオススメいたします。

Nuxt では、サーバーサイドレンダリングを行うことも行わないことも可能ですし、最終的に静的サイトとして書き出すことができるという特徴を考えると、サーバーサイドレンダリングか否かという点は、さほど重要ではありません。

必要であればサーバーサイドレンダリングをオンで運用することができる開発環境と考えるのが最も自然でしょう。

では逆にオススメしないシーンはどこか。

基本的にはあまり存在しませんが、以下のような場合に限っては、 Nuxt の導入については考え直すほうが幸せでしょう。

- 既に Vue.js で書かれた大きめのコードベースであり、アプリケーション内に独自のレイヤーが存在する場合
- 既に Vue.js で書かれたもので、ブラウザ依存のコードが大量に存在する場合
- Webpacker や Laravel Mix など、完全な SPA ではない場合

いずれも Nuxt のルール内で取り扱うことができない分野となりますので、こういったプロジェクトに無理に Nuxt を導入する場合は、不整合が起こるため幸せとは言えないでしょう。

逆に言えば、 SPA 新規開発においては Nuxt を選択しない積極的な理由はほとんどありませんで、基本的には SPA の開発であれば積極的に Nuxt を採用していきましょう。

そのほか、 SPA ではなく、複数ページの Web サイトの開発においても Nuxt は有効に働きます。

Nuxt を静的サイトモードにて運用することによって、 Vue.js の恩恵を受けながらも SEO 対策が万全な Web サイトを作ることが可能であるため、 SPA を中心に触るエンジニアが Web サイトを作る場合においても、 Nuxt を存分に活用することができるでしょう。

## Nuxtによる事例紹介

最後に、実用事例をいくつかあげておきます。
全て何かしらの形で筆者が開発に携わっているプロジェクトとなります。

### Web サイトでの事例

- https://push7.jp
- https://corp.scouter.co.jp

 どちらも私が作成した Nuxt での Web サイトとなります。
 Nuxt を中心に利用してサーバーサイドレンダリングを行っており、一部バックエンド実装が必要な箇所は Express と連携しています。

また、 2018 年 11 月に開催される Vue.js オンリーのカンファレンス VueFes Japan 2018 の Web サイトも、 Nuxt(静的サイトモード) + Netlify にてホスティングされています。

https://vuefes.jp

### Web アプリケーションでの事例

また、その他フロントエンドの花形ともいえる SPA、 Web アプリケーションの領域でも広く採用されています。
最新の例では、ブロックチェーンメディア ALIS での実用例があります。

Nuxt を AWS Lambda 上にデプロイし、同じく Lambda 上で動作するサーバーレス API と連携をしている事例です。
こちらはソースコードがオープンソースとなっており、誰でも閲覧が可能となっておりますので、実運用の例として是非一度アクセスください。

https://github.com/AlisProject/frontend-application
