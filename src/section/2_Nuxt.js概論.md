# Nuxt.js概論

それではいよいよ本書のテーマである Nuxt の概要についてご紹介していきます。

このセクションでは、Nuxt.js がどういった技術であるか。という簡単なご紹介のほか、前セクションにて考えた要件に対して、どれだけNuxt.jsがマッチしているか。どういった時にNuxt.jsを利用すべきか。

逆に利用すべきでない場合はどういうときか。といったものをご紹介いたします。

## Nuxt.jsとは何か

Nuxt.jsは、Vue.jsをベースとして開発された、フロントエンドのフルスタックなフレームワークとなります。
当初はVue.jsにおけるサーバーサイドレンダリングが煩雑であるという課題を解決するために、先行のReact製のフレームワークである「Next.js」を模して開発されましたが、今やミニマルな機能だけを提供しているNext.jsとは裏腹に、Vue.js開発で頻繁に利用される機能を全て取り込んだ、非常に強力なフレームワークとして仕上がっています。

サーバーサイドレンダリングは勿論、それ自体をオフにしてただのSPA用のフレームワークとして利用することも可能ですし、SPAをSEOに強いHTMLとして正しく静的サイトとして吐き出してくれる機能まで持っている状態となり、様々な開発シーンで柔軟に使えるフレームワークとして仕上がっています。

サーバーサイドレンダリングを行わず、ただのSPA基盤として使う場合でも、FluxパターンのVue実装であるVuexストアのオートローディング機能や、ルーティングの自動生成機能、グローバルなレイアウトの共通化システムに、特定のルーティングに限って認証を付与するなど、アクセスに対してガードを張ることが可能なミドルウェアに、通常のVueプラグインをより柔軟に扱うためのプラグインシステム、そして公式が提供するプラグインやミドルウェアを簡単に読み込むことができるNuxtモジュールまで。簡単なSPA開発では全ての機能を使い切れないほどの機能があります。

勿論、中規模大規模となってくると、特定のルーティングだけ任意のガードを張ることができ、リクエスト内容を改善できるミドルウェアなどは、無くてはならない存在となってきますので、大きくなるアプリケーションとともに成長していくのにベストなフレームワークとなっております。

## 今、SPA開発にNuxt.jsが求められるワケ

確かに今まであげた機能は魅力的ですが、Vue.js単体でこれまでの開発が行われてきたことを考えると、決してNuxt.jsに頼らずとも本格的なSPA開発は十分こなせるはずです。では、その上でなぜNuxt.jsが必要なのでしょうか？

その一つの回答として、秩序があります。Vue.jsは、非常に柔軟なフレームワークとなっており、かつReact + ReduxやAngularのように、鉄板パターンが提唱され、浸透しきっているわけではない状態であります。Vue.jsは間口が広いこともあり、一般的に自由なコーディングが蔓延しやすい傾向にあり、なかなかにアーキテクチャが安定しないことを経験したことがあるかたは多いでしょう。

Nuxt.jsは、その問題を規約ベースのルール設定と規約に沿った場合の強力なサポートによって縛ることが可能です。ディレクトリ名など、ある程度は規約を曲げることもできますが、基本的にはNuxt.jsが良しとするルーティング構成で、Nuxt.jsが良しとするVuex Store構成, コンポーネント構成にしておけば間違いなく、かつ強力な支援が得られることとなります。

また、コンポーネントやページはまだある程度プロジェクトごとにルールの制定することができますが、middlewareやpluginに関しては、Vue.jsデフォルトでは存在しないため、バラバラに管理されるか、index.jsやApp.vueの無闇な肥大化につながることが頻発します。この問題についても、Nuxt.js側でシステムの実装が行われているため、そのルールに沿っていくことによって、秩序のある開発が可能となります。

Vue.js開発で苦しんでいる人が、なによりもNuxtに対して希望がもてるポイントは、きっと秩序の一点でしょう。

もう一つの回答は、前セクションで紹介した「流行する技術への追従」を正しく行っていることでしょう。

Nuxt.jsは、その独自コミュニティの中で、PWA用のモジュールや、サーバーサイドレンダリングの基盤を提供しています。
確かにVue.jsでも、非常にアトミックな単位でのSSRのシステムや、PWAのテンプレートは提供していますが、Nuxt.jsほど手厚いサポートではないでしょう。また、Vue.js本体がそこまでサポートすることは逆にライブラリとしての方向性に疑問をもつかたも少なくないでしょう。

Nuxt.jsは、それ単体のコミュニティよって進化を続けながら、Vue.jsの本体のルールから逸脱しない形で進んでいるため、これからも先進的な機能をフル活用しながら、かつベースコミュニティとうまく付き合っていく理想的な形を進んでいくことでしょう。

## Nuxt.jsをオススメするシーン、しないシーン

それでは、その前提を踏まえた上で、どういったシーンにおいてNuxt.jsをオススメするかをご紹介いたします。

まず、前提として、新規のVue.jsでのSPA開発であれば、間違いなくNuxt.jsを選ぶことをオススメいたします。

Nuxt.jsでは、サーバーサイドレンダリングを行うことも行わないことも可能ですし、最終的に静的サイトとして書き出すことができるという特徴を考えると、サーバーサイドレンダリングか否かという点は、さほど重要ではありません。

必要であればサーバーサイドレンダリングをOnで運用することができる開発環境と考えるのが最も自然でしょう。

では逆にオススメしないシーンはどこか。

基本的にはあまり存在しませんが、以下のような場合に限っては、Nuxt.jsの導入については考え直すほうが幸せでしょう。

- 既にVue.jsで書かれた大きめのコードベースであり、アプリケーション内に独自のレイヤーが存在する場合
- 既にVue.jsで書かれたもので、ブラウザ依存のコードが大量に存在する場合
- WebpackerやLaravel Mixなど、完全なSPAではない場合

いずれもNuxt.jsのルール内で取り扱うことができない分野となりますので、こういったプロジェクトに無理にNuxt.jsを導入する場合は、不整合が起こるため幸せとは言えないでしょう。

逆に言えば、SPA新規開発においてはNuxt.jsを選択しない積極的な理由はほとんどありませんで、基本的にはSPAの開発であれば積極的にNuxt.jsを採用していきましょう。

そのほか、 SPA ではなく、複数ページのWebサイトの開発においても Nuxt は有効に働きます。

Nuxt を静的サイトモードにて運用することによって、Vue.jsの恩恵を受けながらもSEO対策が万全なWebサイトを作ることが可能であるため、 SPA を中心に触るエンジニアが Web サイトを作る場合においても、 Nuxt を存分に活用することができるでしょう。

## Nuxt.jsによる事例紹介

最後に、実用事例をいくつかあげておきます。
全て何かしらの形で筆者が開発に携わっているプロジェクトとなります。

### Web サイトでの事例

- https://push7.jp
- https://corp.scouter.co.jp

 どちらも私が作成した Nuxt での Web サイトとなります。
 Nuxt を中心に利用してサーバーサイドレンダリングを行っており、一部バックエンド実装が必要な箇所は Express と連携しています。

また、 2018 年 11 月に開催される Vue.js オンリーのカンファレンス VueFes Japan 2018 の Web サイトも、 Nuxt(静的サイトモード) + Netlify にてホスティングされています。

https://vuefes.jp

### Web アプリケーションでの事例

また、その他フロントエンドの花形ともいえる SPA、 Web アプリケーションの領域でも広く採用されています。
最新の例では、ブロックチェーンメディア ALIS での実用例があります。

Nuxt.js を AWS Lambda で動かし、同じく Lambda 上で動作するサーバーレス API と連携をしている事例です。
こちらはソースコードがオープンソースとなっており、誰でも閲覧が可能となっておりますので、実運用の例として是非一度アクセスください。

https://github.com/AlisProject/frontend-application
